<!DOCTYPE html>
<html>
  <head>
    <title>Encryption</title>
    <script>
      var norm, encb, enct, decb, ciph;

      window.addEventListener("load", function(){
        norm = document.getElementById('normal');
        encb = document.getElementById('encrypt');
        encr = document.getElementById('encrypted');
        ciph = document.getElementById('cipher');
        decb = document.getElementById('decrypt');

        encb.addEventListener("mousedown", function(){
          encr.value = encrypt(norm.value, ciph.value);
        }, false);

        decb.addEventListener("mousedown", function(){
          norm.value = decrypt(encr.value, ciph.value);
        }, false);

      }, false);


      function encrypt(text, cipher){
        cipherChars = cipher.split("").reverse();
        textChars = text.split("");
        encrypted = "";

        for(var i = 0; i < textChars.length; i++){
          encrypted += String.fromCharCode(textChars[i].charCodeAt(0) + cipherChars[i % cipherChars.length].charCodeAt(0));
        }

        return encrypted;
      }

      function decrypt(text, cipher){
        cipherChars = cipher.split("").reverse();
        textChars = text.split("");
        decrypted = "";

        for(var i = 0; i < textChars.length; i++){
          decrypted += String.fromCharCode(textChars[i].charCodeAt(0) - cipherChars[i % cipherChars.length].charCodeAt(0));
        }

        return decrypted;
      }
    </script>
  </head>
  <body>
    <table>
      <tr>
        <td>Normal</td>
        <td><textarea id="normal"></textarea></td>
      </tr>
      <tr>
        <td>Cipher</td>
        <td><textarea id="cipher"></textarea></td>
      </tr>
      <tr>
        <td>Encrypted</td>
        <td><textarea id="encrypted"></textarea></td>
      </tr>
      <tr>
        <td>
          <button id="encrypt">Encrypt</button>
        </td>
        <td>
          <button id="decrypt">Decrypt</button>
        </td>
      </tr>
    </table>



  </body>
</html>
